<div *ngIf="loadingState() as loading"
     class="data-table-page task-manage">
  <div class="data-table-page__main-container">
    <mix-sub-toolbar [description]="'Work on'"
                     [titleTpl]="taskSelect">
      <ng-template #taskSelect>
        <mix-project-select (selectedItemChange)="taskManage.changeSelected($event)"></mix-project-select>
      </ng-template>

      <div class="toolbar-separator"></div>

      <mix-button (click)="addTask()"
                  size="s"><span class="material-symbols-outlined"> add </span>&nbsp;
        {{ 'New' | transloco }}</mix-button>
    </mix-sub-toolbar>

    <mix-task-filter></mix-task-filter>

    <div *ngIf="store.vm$ | async as vm"
         class="task-manage__main-view"
         cdkDropListGroup>
      <!-- Header -->
      <mix-task-header></mix-task-header>

      <!-- Loading View -->
      @if (vm.status === 'Loading') {
      <mix-skeleton-loading [type]="'inline'"></mix-skeleton-loading>
      }

      <!-- Main View -->
      @if (store.getParentTasks() | async; as tasks) {
      <!-- Loop task -->
      @for (task of tasks; track task.id) {
      <mix-task-group-list [parentTask]="task"
                           [taskStatuses]="taskStatuses">
      </mix-task-group-list>
      } }
    </div>
  </div>
</div>
