<ng-container *ngIf="state() as vm">
  <div class="database-inline-select"
       [tp]="dbSelect"
       [tpOffset]="[-10, 5]"
       tpVariation="popper"
       tpPlacement="bottom-start">
    <div class="text-xl text-600">
      {{
        getSelectedDbName(vm.data, selectedItemId, selectedItemName)
          ?.displayName || 'Choose database'
      }}
    </div>
    <span class="mix-icon text-600 text-xxl">arrow_drop_down</span>
  </div>

  <ng-template #dbSelect
               let-hide>
    <div class="popup-container">
      @for (item of vm.data; track item) {
      <div class="mix-menu-item flex justify-between"
           (click)="selectDb(item); hide()">
        <div class="text-500">{{ item.displayName }}</div>
        <div class="text-sub text-s">{{ item.columns.length }} cols</div>
      </div>
      }
    </div>
  </ng-template>
</ng-container>
